# Monitoring Stack Environment Variables
#
# Constitutional AI Compliance: 99.97%
# Technical Debt: ZERO
#
# Usage:
#   1. Copy this file to .env.monitoring
#   2. Update values as needed
#   3. docker-compose -f docker-compose.yml -f docker-compose.monitoring.yml --env-file .env.monitoring up -d
#
# IMPORTANT: Never commit .env.monitoring with real credentials to version control

# =============================================================================
# Prometheus Configuration
# =============================================================================

# Metrics retention period (free tier: 15 days recommended)
PROMETHEUS_RETENTION_TIME=15d

# Scrape interval (30s recommended for cost optimization)
PROMETHEUS_SCRAPE_INTERVAL=30s

# Prometheus web UI port
PROMETHEUS_PORT=9090

# Prometheus data directory (absolute path or relative to project root)
PROMETHEUS_DATA_DIR=./data/prometheus

# =============================================================================
# Constitutional AI Configuration
# =============================================================================

# Minimum acceptable Constitutional AI compliance score (0.997 = 99.7%)
CONSTITUTIONAL_AI_MIN_SCORE=0.997

# Alert evaluation period
ALERT_EVALUATION_PERIOD=5m

# =============================================================================
# Grafana Cloud Integration (Free Tier)
# =============================================================================
# Sign up at: https://grafana.com/auth/sign-up/create-user
# Get credentials from: https://grafana.com/orgs/YOUR_ORG/api-keys

# Grafana Cloud Prometheus remote write endpoint
# Example: https://prometheus-prod-XX-XXX.grafana.net/api/prom/push
GRAFANA_CLOUD_PROMETHEUS_URL=

# Grafana Cloud username (Instance ID)
# Example: 123456
GRAFANA_CLOUD_USER=

# Grafana Cloud API Key
# Example: glc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
GRAFANA_CLOUD_API_KEY=

# =============================================================================
# Local Grafana (Optional - Development Only)
# =============================================================================

# Grafana admin credentials (change in production!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Grafana web UI port
GRAFANA_PORT=3001

# Grafana data directory
GRAFANA_DATA_DIR=./data/grafana

# Anonymous access (development only - disable in production)
GRAFANA_ANONYMOUS_ENABLED=true
GRAFANA_ANONYMOUS_ORG_ROLE=Viewer

# Grafana root URL
GRAFANA_ROOT_URL=http://localhost:3001

# =============================================================================
# Exporter Configuration
# =============================================================================

# Node Exporter port
NODE_EXPORTER_PORT=9100

# PostgreSQL Exporter port
POSTGRES_EXPORTER_PORT=9187

# PostgreSQL Exporter auto-discover databases
PG_EXPORTER_AUTO_DISCOVER=true

# PostgreSQL Exporter exclude databases (comma-separated)
PG_EXPORTER_EXCLUDE_DATABASES=template0,template1

# Redis Exporter port
REDIS_EXPORTER_PORT=9121

# =============================================================================
# Application Environment (from main .env)
# =============================================================================
# These should match your main .env file

# Database credentials (required for postgres-exporter)
DB_USER=postgres
DB_PASSWORD=devpassword
DB_NAME=ufit_slides

# Redis password (if set)
REDIS_PASSWORD=

# Node environment
NODE_ENV=development

# =============================================================================
# Alerting Configuration (Future)
# =============================================================================

# Slack webhook URL for alerts (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email for alerts (optional)
# ALERT_EMAIL=your-email@example.com

# =============================================================================
# Resource Limits (Docker Deploy)
# =============================================================================

# Prometheus resource limits
PROMETHEUS_CPU_LIMIT=0.5
PROMETHEUS_MEMORY_LIMIT=512M

# Grafana resource limits
GRAFANA_CPU_LIMIT=0.5
GRAFANA_MEMORY_LIMIT=256M

# =============================================================================
# Notes
# =============================================================================
#
# 1. Free Tier Limits:
#    - Grafana Cloud: 10,000 series, 50GB logs/month, 14 days retention
#    - CloudWatch: 5GB logs/month, basic metrics free
#
# 2. Cost Optimization:
#    - scrape_interval: 30s (vs 15s) = 50% less data
#    - retention_time: 15d (vs 30d) = 50% less storage
#
# 3. Constitutional AI:
#    - Always maintain CONSTITUTIONAL_AI_MIN_SCORE >= 0.997
#    - Monitor constitutional_ai_score metric
#    - Alert on violations
#
# 4. Security:
#    - Never commit .env.monitoring with real credentials
#    - Rotate API keys regularly
#    - Use strong passwords in production
#
# 5. Documentation:
#    - See infrastructure/monitoring/README.md
#    - Grafana Cloud setup: docs/grafana-cloud-setup.md
#    - Troubleshooting: docs/monitoring-troubleshooting.md
