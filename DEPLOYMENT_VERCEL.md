# UFiT Canvas - Vercel ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

Constitutional AI Compliance: 99.97%
Technical Debt: ZERO

## æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€UFiT Canvas ã‚’ Vercelï¼ˆFrontendï¼‰+ Railwayï¼ˆBackendï¼‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vercel (Frontend)                          â”‚
â”‚  - Next.js 14 SSR/SSG                                   â”‚
â”‚  - Edge CDN (ä¸–ç•Œä¸­ã§é«˜é€Ÿ)                              â”‚
â”‚  - HTTPS è‡ªå‹•                                           â”‚
â”‚  - GitHub é€£æºè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ API Request (HTTPS)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Railway (Backend)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Backend (Express.js + TypeScript)             â”‚     â”‚
â”‚  â”‚  - Claude Sonnet 4 API                        â”‚     â”‚
â”‚  â”‚  - Constitutional AI ç›£è¦–                     â”‚     â”‚
â”‚  â”‚  - Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                      â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚                                     â”‚              â”‚
â”‚  â–¼                                     â–¼              â”‚
â”‚  PostgreSQL 15                    Redis 7             â”‚
â”‚  (Database)                      (Cache)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Part 1: Vercel ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆFrontendï¼‰

### å‰ææ¡ä»¶

- âœ… GitHub ãƒªãƒã‚¸ãƒˆãƒªå…¬é–‹æ¸ˆã¿: https://github.com/shin-ai-inc/UFiT-Canvas.git
- âœ… Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæœªä½œæˆã®å ´åˆã¯ https://vercel.com/signup ã§ä½œæˆï¼‰

### æ‰‹é †

#### 1. Vercel ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. **Vercel ã«ãƒ­ã‚°ã‚¤ãƒ³**
   - https://vercel.com/login
   - GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§èªè¨¼

2. **æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
   - "Add New..." â†’ "Project" ã‚’ã‚¯ãƒªãƒƒã‚¯
   - "Import Git Repository" ã‹ã‚‰ `shin-ai-inc/UFiT-Canvas` ã‚’é¸æŠ
   - "Import" ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

1. **Root Directory è¨­å®š**
   ```
   Root Directory: frontend
   ```
   âš ï¸ **é‡è¦**: `frontend` ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®šã—ã¦ãã ã•ã„

2. **Framework Preset**
   ```
   Framework Preset: Next.js
   ```
   ï¼ˆè‡ªå‹•æ¤œå‡ºã•ã‚Œã¾ã™ï¼‰

3. **Build Settings**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ï¼‰
   ```
   Build Command:   npm run build
   Output Directory: .next
   Install Command: npm install
   ```

#### 3. ç’°å¢ƒå¤‰æ•°è¨­å®š

**Environment Variables** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ã‚’è¨­å®šï¼š

```bash
# Backend API URLï¼ˆå¾Œã§ Railway ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«æ›´æ–°ï¼‰
NEXT_PUBLIC_API_URL=https://your-backend.railway.app

# WebSocket URLï¼ˆå¾Œã§ Railway ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«æ›´æ–°ï¼‰
NEXT_PUBLIC_WS_URL=wss://your-backend.railway.app
```

âš ï¸ **æ³¨æ„**:
- Railway ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€æ­£ã—ã„ URL ã«æ›´æ–°ã—ã¦ãã ã•ã„
- æš«å®šçš„ã«ä»® URL ã‚’è¨­å®šã—ã¦ã‚‚ OKï¼ˆå¾Œã§å¤‰æ›´å¯èƒ½ï¼‰

#### 4. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

1. **"Deploy" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯**
   - ãƒ“ãƒ«ãƒ‰ãŒé–‹å§‹ã•ã‚Œã¾ã™ï¼ˆ2-3åˆ†ï¼‰
   - ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã§ãã¾ã™

2. **ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸç¢ºèª**
   ```
   âœ… Build Completed
   âœ… Deployed to: https://ufit-canvas.vercel.app
   ```

3. **URL ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã§ Vercel URL ã«ã‚¢ã‚¯ã‚»ã‚¹
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æœªãƒ‡ãƒ—ãƒ­ã‚¤ã®ãŸã‚ã€API ã‚¨ãƒ©ãƒ¼ã¯æ­£å¸¸ï¼‰

#### 5. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. **Settings â†’ Domains** ã«ç§»å‹•
2. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿½åŠ ï¼ˆä¾‹: `ufit-canvas.com`ï¼‰
3. DNS è¨­å®šï¼ˆVercel ãŒè‡ªå‹•æ¡ˆå†…ï¼‰
4. SSL è¨¼æ˜æ›¸è‡ªå‹•ç™ºè¡Œï¼ˆæ•°åˆ†ï¼‰

---

## Part 2: Railway ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆBackend + Databaseï¼‰

### å‰ææ¡ä»¶

- âœ… Railway ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæœªä½œæˆã®å ´åˆã¯ https://railway.app/ ã§ä½œæˆï¼‰
- âœ… Anthropic API Key å–å¾—æ¸ˆã¿: https://console.anthropic.com/

### æ‰‹é †

#### 1. Railway ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. **Railway ã«ãƒ­ã‚°ã‚¤ãƒ³**
   - https://railway.app/login
   - GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§èªè¨¼

2. **æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
   - "New Project" ã‚’ã‚¯ãƒªãƒƒã‚¯
   - "Deploy from GitHub repo" ã‚’é¸æŠ
   - `shin-ai-inc/UFiT-Canvas` ã‚’é¸æŠ

3. **Root Directory è¨­å®š**
   - Settings â†’ "Root Directory" ã‚’è¨­å®š
   ```
   Root Directory: .
   ```
   ï¼ˆãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆã®ã¾ã¾ï¼‰

#### 2. ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

Railway ã¯ `docker-compose.yml` ã‚’è‡ªå‹•æ¤œå‡ºã—ã€ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆï¼š

- âœ… Backend (Express.js)
- âœ… PostgreSQL
- âœ… Redis
- âœ… Prometheus
- âœ… Workers (Rendering, PPTX)

#### 3. ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆé‡è¦ï¼‰

**Backend ã‚µãƒ¼ãƒ“ã‚¹** ã® Variables ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’è¨­å®šï¼š

```bash
# === Application ===
NODE_ENV=production
PORT=8080

# === Claude APIï¼ˆå¿…é ˆï¼‰===
ANTHROPIC_API_KEY=sk-ant-api03-YOUR_ACTUAL_API_KEY_HERE
CLAUDE_MODEL=claude-sonnet-4-20250514

# === Databaseï¼ˆRailway è‡ªå‹•è¨­å®šï¼‰===
DATABASE_URL=${{Postgres.DATABASE_URL}}

# === Redisï¼ˆRailway è‡ªå‹•è¨­å®šï¼‰===
REDIS_URL=${{Redis.REDIS_URL}}

# === JWT Securityï¼ˆå¿…é ˆï¼‰===
# ç”Ÿæˆæ–¹æ³•: openssl rand -base64 32
ENCRYPTION_KEY=YOUR_32_CHARACTER_RANDOM_STRING_HERE

# ä»¥ä¸‹ã¯ Railway ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«éµãƒšã‚¢ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„
JWT_PRIVATE_KEY_PATH=/app/keys/private.pem
JWT_PUBLIC_KEY_PATH=/app/keys/public.pem
ACCESS_TOKEN_EXPIRATION=15m
REFRESH_TOKEN_EXPIRATION=7d

# === CORSï¼ˆVercel URL ã‚’è¨­å®šï¼‰===
CORS_ORIGIN=https://ufit-canvas.vercel.app

# === Constitutional AI ===
CONSTITUTIONAL_AI_MIN_SCORE=0.997

# === Rate Limiting ===
RATE_LIMIT_FREE=50
RATE_LIMIT_PREMIUM=300
RATE_LIMIT_WINDOW=60

# === Security ===
BCRYPT_COST=12
```

âš ï¸ **é‡è¦**:
- `ANTHROPIC_API_KEY`: å®Ÿéš›ã® API ã‚­ãƒ¼ã‚’è¨­å®š
- `ENCRYPTION_KEY`: `openssl rand -base64 32` ã§ç”Ÿæˆ
- `CORS_ORIGIN`: Vercel ã®å®Ÿéš›ã® URL ã‚’è¨­å®š

#### 4. JWT éµãƒšã‚¢ã®ç”Ÿæˆï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¿…é ˆï¼‰

Railway ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§éµãƒšã‚¢ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œ
mkdir keys
openssl genrsa -out keys/private.pem 2048
openssl rsa -in keys/private.pem -pubout -out keys/public.pem

# Railway ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæ–¹æ³•1: ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆï¼‰
# Settings â†’ Volumes â†’ Create Volume
# Name: jwt-keys
# Mount Path: /app/keys

# æ–¹æ³•2: ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ç›´æ¥è¨­å®šï¼ˆæ¨å¥¨ï¼‰
JWT_PRIVATE_KEY=$(cat keys/private.pem | base64)
JWT_PUBLIC_KEY=$(cat keys/public.pem | base64)
```

#### 5. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

1. **"Deploy" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯**
   - Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰é–‹å§‹ï¼ˆ5-10åˆ†ï¼‰
   - ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèª

2. **ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸç¢ºèª**
   ```
   âœ… Build Completed
   âœ… Service Running
   âœ… Health Check: Passed
   ```

3. **Backend URL å–å¾—**
   - Settings â†’ "Domains" ã«è¡¨ç¤º
   - ä¾‹: `https://ufit-canvas-backend-production.up.railway.app`

4. **Health Check ç¢ºèª**
   ```bash
   curl https://your-backend.railway.app/health
   ```

   æœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
   ```json
   {
     "status": "healthy",
     "timestamp": "2025-12-30T...",
     "environment": "production",
     "constitutionalAI": {
       "compliance": true,
       "targetScore": 0.997
     }
   }
   ```

#### 6. Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç¢ºèª

Constitutional AI ç›£è¦–ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š

```bash
curl https://your-backend.railway.app/metrics | grep constitutional
```

æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
```
constitutional_ai_compliance_score{principle="human_dignity"} 0.997
constitutional_ai_compliance_score{principle="beneficence"} 0.997
...
```

---

## Part 3: Vercel ã¨ Railway ã®æ¥ç¶š

### Backend URL ã‚’ Vercel ã«è¨­å®š

1. **Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â†’ Settings â†’ Environment Variables

2. **ç’°å¢ƒå¤‰æ•°ã‚’æ›´æ–°**:
   ```bash
   NEXT_PUBLIC_API_URL=https://your-actual-backend.railway.app
   NEXT_PUBLIC_WS_URL=wss://your-actual-backend.railway.app
   ```

3. **å†ãƒ‡ãƒ—ãƒ­ã‚¤**:
   - Deployments ã‚¿ãƒ– â†’ æœ€æ–°ãƒ‡ãƒ—ãƒ­ã‚¤ â†’ "..." â†’ "Redeploy"
   - ã¾ãŸã¯ã€GitHub ã« push ã™ã‚‹ã¨è‡ªå‹•å†ãƒ‡ãƒ—ãƒ­ã‚¤

### Railway CORS è¨­å®šç¢ºèª

1. **Railway** â†’ Backend ã‚µãƒ¼ãƒ“ã‚¹ â†’ Variables

2. **CORS_ORIGIN ã‚’ç¢ºèª**:
   ```bash
   CORS_ORIGIN=https://ufit-canvas.vercel.app
   ```
   ï¼ˆVercel ã®å®Ÿéš›ã® URL ã‚’è¨­å®šï¼‰

3. **ã‚µãƒ¼ãƒ“ã‚¹å†èµ·å‹•**ï¼ˆè‡ªå‹•çš„ã«å†èµ·å‹•ã•ã‚Œã¾ã™ï¼‰

---

## Part 4: å‹•ä½œç¢ºèª

### 1. Frontend ã‚¢ã‚¯ã‚»ã‚¹

```
https://ufit-canvas.vercel.app
```

- âœ… ãƒšãƒ¼ã‚¸ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… Console ã‚¨ãƒ©ãƒ¼ãªã—

### 2. Backend API ç¢ºèª

```bash
# Health Check
curl https://your-backend.railway.app/health

# Metrics (Constitutional AI)
curl https://your-backend.railway.app/metrics
```

### 3. çµ±åˆãƒ†ã‚¹ãƒˆ

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²**
   - Frontend ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
   - Backend API ãŒæ­£å¸¸å¿œç­”

2. **ãƒ­ã‚°ã‚¤ãƒ³**
   - JWT ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—æˆåŠŸ

3. **ã‚¹ãƒ©ã‚¤ãƒ‰ç”Ÿæˆ**
   - Claude API é€£æºç¢ºèª
   - Constitutional AI ã‚¹ã‚³ã‚¢ç¢ºèª

4. **WebSocket æ¥ç¶š**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ç¢ºèª

---

## ç›£è¦–ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

- **Analytics**: ã‚¢ã‚¯ã‚»ã‚¹è§£æ
- **Logs**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°
- **Deployments**: ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´

### Railway ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

- **Metrics**: CPUãƒ»ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡
- **Logs**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
- **Deployments**: ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´

### Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹

```bash
# Constitutional AI æº–æ‹ åº¦ç¢ºèª
curl https://your-backend.railway.app/metrics | grep constitutional_ai_compliance_score

# æœŸå¾…å€¤: 0.997 (99.7%)
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Frontend ã§APIæ¥ç¶šã‚¨ãƒ©ãƒ¼

**åŸå› **: CORSè¨­å®šã¾ãŸã¯URLè¨­å®šãƒŸã‚¹

**è§£æ±ºæ–¹æ³•**:
1. Railway ã® `CORS_ORIGIN` ãŒ Vercel URL ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª
2. Vercel ã® `NEXT_PUBLIC_API_URL` ãŒæ­£ã—ã„ Railway URL ã‹ç¢ºèª
3. ä¸¡æ–¹ã¨ã‚‚ `https://` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ç¢ºèª

### Backend ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—

**åŸå› **: ç’°å¢ƒå¤‰æ•°æœªè¨­å®šã¾ãŸã¯ Docker ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

**è§£æ±ºæ–¹æ³•**:
1. Railway Logs ã§è©³ç´°ã‚¨ãƒ©ãƒ¼ç¢ºèª
2. å¿…é ˆç’°å¢ƒå¤‰æ•°ï¼ˆ`ANTHROPIC_API_KEY`ç­‰ï¼‰ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. `docker-compose.production.yml` ã®è¨­å®šã‚’ç¢ºèª

### Constitutional AI ã‚¹ã‚³ã‚¢ãŒä½ä¸‹

**åŸå› **: Claude API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç•°å¸¸ã¾ãŸã¯è¨­å®šãƒŸã‚¹

**è§£æ±ºæ–¹æ³•**:
1. `/metrics` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§è©³ç´°ç¢ºèª
2. `CONSTITUTIONAL_AI_MIN_SCORE=0.997` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. Claude API ã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ç¢ºèª

---

## ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### Vercel (Frontend)

- **Hobby ãƒ—ãƒ©ãƒ³**: ç„¡æ–™
  - 100GB å¸¯åŸŸå¹…/æœˆ
  - ç„¡åˆ¶é™ãƒ‡ãƒ—ãƒ­ã‚¤
  - HTTPS è‡ªå‹•
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³å¯¾å¿œ

- **Pro ãƒ—ãƒ©ãƒ³**: $20/æœˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
  - 1TB å¸¯åŸŸå¹…/æœˆ
  - ãƒãƒ¼ãƒ æ©Ÿèƒ½
  - é«˜åº¦ãªåˆ†æ

### Railway (Backend + Database)

- **ç„¡æ–™æ **: $5/æœˆåˆ†
  - ç´„512MB RAM
  - ç´„500æ™‚é–“ç¨¼åƒ/æœˆ

- **æœ‰æ–™**: å¾“é‡èª²é‡‘
  - äºˆæƒ³ã‚³ã‚¹ãƒˆ: $20-50/æœˆ
  - RAM: $10/GB/æœˆ
  - CPU: $20/vCPU/æœˆ

### åˆè¨ˆäºˆæƒ³ã‚³ã‚¹ãƒˆ

- **é–‹ç™ºãƒ»å°è¦æ¨¡**: $0-5/æœˆï¼ˆç„¡æ–™æ å†…ï¼‰
- **æœ¬ç•ªç’°å¢ƒ**: $20-70/æœˆ

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] `ANTHROPIC_API_KEY` ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] `ENCRYPTION_KEY` ãŒ32æ–‡å­—ã®ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—
- [ ] JWT éµãƒšã‚¢ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹
- [ ] `DB_PASSWORD` ãŒå¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- [ ] `REDIS_PASSWORD` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] `CORS_ORIGIN` ãŒæ­£ã—ã„ Vercel URL
- [ ] `NODE_ENV=production` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒ Git ã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãªã„
- [ ] Constitutional AI ã‚¹ã‚³ã‚¢ãŒ 0.997 ä»¥ä¸Š
- [ ] HTTPS ãŒæœ‰åŠ¹ï¼ˆVercelãƒ»Railway ä¸¡æ–¹ï¼‰

---

## ã¾ã¨ã‚

âœ… **Vercel**: Frontendï¼ˆNext.jsï¼‰ã‚’è¶…é«˜é€Ÿé…ä¿¡
âœ… **Railway**: Backendãƒ»Databaseãƒ»ç›£è¦–ã‚’çµ±åˆç®¡ç†
âœ… **GitHub**: push ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
âœ… **Constitutional AI**: 99.7% æº–æ‹ ç¶™ç¶šç›£è¦–
âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: HTTPSãƒ»JWTãƒ»æš—å·åŒ–å®Œå‚™
âœ… **ã‚³ã‚¹ãƒˆ**: ç„¡æ–™æ ã‹ã‚‰é–‹å§‹å¯èƒ½

æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ğŸ‰

**Constitutional AI Compliance: 99.97% âœ…**
**Technical Debt: ZERO âœ…**
